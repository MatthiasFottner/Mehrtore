% Created 2020-10-25 So 23:03
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{scrartcl}
\usepackage[ngerman]{babel}
\usepackage{caption}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{MnSymbol}
\usepackage{mathtools}
\usepackage{setspace}
\usepackage{nicematrix}
\usepackage{listings}
\usepackage{pdfpages}
\usepackage[straightvoltages, european resistors, american inductors]{circuitikz}
\usetikzlibrary{arrows.meta}
\tikzset{FARROW/.style={arrows={-Triangle[angle=45:2.0mm]}}}


\renewcaptionname{ngerman}{\figurename}{Abb.}
\renewcaptionname{ngerman}{\tablename}{Tab.}



\author{David Keller, Moritz Woltron, Matthias Fottner}
\date{}
\title{Protokoll Übung 2}




\definecolor{darkspringgreen}{rgb}{0.09, 0.45, 0.27}    % Farbe für die Kommentare bei Listings
\lstset{
  language= Matlab,                     % Setzt die Sprache
  basicstyle=\scriptsize\ttfamily,     % Setzt den Standardstil
  % keywordstyle=\color{red}\bfseries,    % Setzt den Stil für Schlüsselwörter
  identifierstyle=\color{blue},        % Identifier bekommen keine gesonderte formatierung
  commentstyle=\color{darkspringgreen},        % Stil für Kommentare
  stringstyle=\ttfamily,             % Stil für Strings (gekennzeichnet mit "String")
  breaklines=true,             % Zeilen werden umgebrochen
  numbers=left,                 % Zeilennummern links
  numberstyle=\tiny,             % Stil für die Seitennummern
  frame=single,                 % Rahmen
  % backgroundcolor=\color{myGrey},     % Hintergrundfarbe
  % caption={Java-Code},             % Caption
  tabsize=2                % Größe der Tabulatoren
}




\begin{document}

\maketitle
\newcommand{\unit}[1]{\,\text{#1}}

\section{Schaltplan mit allen Strömen, Spannungen und Knoten}
\begin{figure}[!htb]
  \centering
\hspace*{-40pt}
\begin{circuitikz}[scale=0.85]
  \clip (-4.5,-2.5) rectangle (16.5, 11);
  % create all nodes
  \draw node[label=left:$n_1$](n1) at (0,4)
        node[label=south east:$n_2$](n2) at (4,4)
        node[label=south east:$n_3$](n3) at (8,4)
        node[label=north:$n_4$](n4) at (4,8)
        node[label=left:$n_5$](n5) at (0,8)
        node[label=north:$a$](a) at (10,8)
        node[label=south:$b$](b) at (10,4);

  % draw all resistors
  \draw (n5) to[R=$R_1$, v={\color{blue}{$U_{R1}$}}, i={\color{red}{$I_{R1}$}}, o-o] (n1)
        (n1) to[short] ++ (0.4, 0) to[R=$R_2$, v={\color{blue}{$U_{R2}$}}, i={\color{red}{$I_{R2}$}}] ++ (2.7, 0 ) to[short] (n2)
        (n2) to[R=$R_3$, v={\color{blue}{$U_{R3}$}}, i={\color{red}{$I_{R3}$}}, o-o] (n4)
        (n2) to[short] ++ (0,-1) to[R=$R_4$, v={\color{blue}{$U_{R4}$}}, i={\color{red}{$I_{R4}$}}] ++ (0,-2.5) to[short] (4,0)
        (8,8) to[R=$R_5$, v={\color{blue}{$U_{R5}$}}, i={\color{red}{$I_{R5}$}}, o-o] (n3)
        (4,0) to[R=$R_6$, v={\color{blue}{$U_{R6}$}}, i={\color{red}{$I_{R6}$}}, o-] (8,0)
        (12,8) to[R=$R_7$, v={\color{blue}{$U_{R7}$}}, i={\color{red}{$I_{R7}$}}, o-o] (12,4);

  % draw sources
  \draw (0,0) to[cvsource={\color{blue}{$U_{S1}$}}, i>={\color{red}{$I_{S1}^?$}}] (n1)
        (n4) to[vsource, v_={\color{blue}{$U_{S2}$}}, i>_={\color{red}{$I_{S2}^?$}}] (n5)
        (n2) to[short, o-] ++ (0.5,0) to[isource, v>={\color{blue}{$U_{S3}^?$}}, i>={\color{red}{$I_{S3}$}}] ++ (3,0) to[short, -o] (n3)
        (15,4) to[isource, v>={\color{blue}{$U_{S4}^?$}}, i={\color{red}{$I_{S4}$}}] (15,8);

  % fill in wires
  \draw (0,0) to[short] (4,0);
  \draw (8,0) to[short] (8,4);
  \draw (n4) to[short] ++ (4,0);
  \draw (n3) to[short, -o] ++ (2,0) to[short] ++ (2,0) to[short] ++ (3,0);
  \draw (8,8) to[short, -o] ++ (2,0) to[short] ++ (2,0) to[short] ++ (3,0);

  % draw ground
  \draw (4,0) node[rground]{};

  % draw node currents
  \draw[european voltages, color=green!50!black] (n2) to[open, v=$U_{n2}$] (2.1,0)
                                                 (n1) to[open, v^=$U_{n1}$] (0.7,0)
                                                 (-1.5,8) to[open, v=$U_{n5}$] (-1.5,0);


  % \draw[FARROW, green!50!black] plot [smooth, tension=1] coordinates {(8.7,3.3) (9,-1) (4,-1)}
  \draw[FARROW, green!50!black] (8.6, 3.2) to[bend left=90, looseness=2] node[below right]{$U_{n3}$} (4.5,-1);
  \draw[FARROW, green!50!black] (3, 9) to[bend right=110, looseness=1.9] node[below left]{$U_{n4}$} (0,-0.5);

  % \draw [brown] (current bounding box.south west) rectangle (current bounding box.north east);
  % \draw[gray,step=0.25] (-6,-3) grid (16.5, 11);

\end{circuitikz}
\caption{Netzwerk mit allen eingezeichneten Strömen, (Knoten-)spannungen und Knoten}
\label{fig:net}
\end{figure}

\end{document}