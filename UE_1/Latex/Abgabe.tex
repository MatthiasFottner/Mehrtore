% Created 2020-10-25 So 22:25
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{MnSymbol}
\usepackage{mathtools}
\usepackage[straightvoltages, european resistors, american inductors]{circuitikz}
\author{David Keller, Moritz Woltron, Matthias Fottner}
\date{}
\title{Protokoll Ãœbung 1}
\begin{document}

\maketitle
\makeatletter
\ctikzset{current arrow color/.initial=black}

\pgfdeclareshape{currarrow}\{
    \anchor{center}\{
        \pgfpointorigin
    \}
        \anchor{tip}\{
        \pgfpointorigin
            \pgf@circ@res@step = \pgf@circ@Rlen
                \divide \pgf@circ@res@step by 16
        \pgf@x  =\pgf@circ@res@step
        \}
    \behindforegroundpath\{

\pgfscope
    \pgf@circ@res@step = \pgf@circ@Rlen
    \divide \pgf@circ@res@step by 16

\pgfpathmoveto\{\pgfpoint{-.7\pgf@circ@res@step}{0pt}\}
\pgfpathlineto\{\pgfpoint{-.7\pgf@circ@res@step}{-.8\pgf@circ@res@step}\}
\pgfpathlineto\{\pgfpoint{1\pgf@circ@res@step}{0pt}\}
\pgfpathlineto\{\pgfpoint{-.7\pgf@circ@res@step}{.8\pgf@circ@res@step}\}
\pgfpathlineto\{\pgfpoint{-.7\pgf@circ@res@step}{0pt}\}
\pgfsetcolor\{\pgfkeysvalueof{/tikz/circuitikz/current arrow color}\}
\pgfusepath{draw,fill}

        \endpgfscope
    \}
\}
\makeatother

\begin{circuitikz}
        \draw (0,0) node(n0){};
        \draw (0,0) to[isource=$I_{S1}$, o-o] (0,4) node[label=left:$K_2$](n2){};
        \draw[circuitikz/current arrow color=red] (n2) to[R=$R_1$, i={\color{\pgfkeysvalueof{/tikz/circuitikz/current arrow color}}}$I_{R1}$] ++ (0,4) to[short] ++ (4,0) node[label=above:$K_1$](n1){};
        \draw (n1) to[vsource=$U_{S2}$, i>=$I_{S2}^{?}$,  o-o] ++ (0, -4) node[label=north east:$K_3$](n3){};
        \draw (n2) to[R=$R_2$, i=$I_{R2}$] (n3);
        \draw (n3) to[R=$R_5$, i=$I_{R5}$, o-o] ++ (4,0) node[label=right:$K_4$](n4){};
        \draw (n1) to[short] ++ (4,0) to[cvsource=$U_{S3}$, i>=$I_{S3}^{?}$] (n4);
        \draw (n3) to[short] ++ (0,-1.5) node(n30){};
        \draw (n30) to[R=$R_3$, i=$I_{R3}$] (4,0);
        \draw (n30) to[short] ++ (2,0) to[R=$R_4$, i=$I_{R4}$] (6,0);
        \draw (6,0) to[short] (0,0);
        \draw (0,0) node[rground]{};
\end{circuitikz}
\end{document}